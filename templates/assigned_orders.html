<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assigned Orders - HashMurgi</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-md px-4 py-6">
      <h1 class="text-2xl font-bold text-green-600 mb-6">Delivery Panel</h1>
      <nav class="space-y-4">
        <a href="{{ url_for('delivery_dashboard') }}" class="block text-gray-700 hover:text-green-500">Dashboard</a>
        <a href="{{ url_for('profile_management') }}" class="block text-gray-700 hover:text-green-500">Profile</a>
        <a href="{{ url_for('assigned_orders') }}" class="block text-gray-700 hover:text-green-500">Assigned Orders</a>
        <a href="{{ url_for('delivery_map') }}" class="block text-gray-700 hover:text-green-500">Delivery Map</a>
        <a href="{{ url_for('report_issues') }}" class="block text-gray-700 hover:text-green-500">Report Issues</a>
        <a href="{{ url_for('delivery_income') }}" class="block text-gray-700 hover:text-green-500">Income</a>
        <a href="{{ url_for('logout') }}" class="block text-gray-700 hover:text-red-500">Logout</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto">
      <header class="mb-6">
        <h2 class="text-3xl font-semibold text-gray-800">Assigned Orders</h2>
        <p class="text-gray-500">Manage your delivery tasks</p>
      </header>

      <!-- Orders List -->
      <section class="bg-white p-6 rounded-lg shadow mb-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Current Orders</h3>
          <div>
            <select class="border rounded p-2 text-sm">
              <option>All Orders</option>
              <option>Pending</option>
              <option>In Transit</option>
              <option>Delivered</option>
            </select>
          </div>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white">
            <thead>
              <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                <th class="py-3 px-6 text-left">Order ID</th>
                <th class="py-3 px-6 text-left">Customer</th>
                <th class="py-3 px-6 text-left">Address</th>
                <th class="py-3 px-6 text-left">Items</th>
                <th class="py-3 px-6 text-left">Status</th>
                <th class="py-3 px-6 text-left">Actions</th>
              </tr>
            </thead>
            <tbody class="text-gray-600 text-sm">
              {% if orders %}
                {% for order in orders %}
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                  <td class="py-3 px-6">{{ order.id }}</td>
                  <td class="py-3 px-6">{{ order.customer_name }}</td>
                  <td class="py-3 px-6">{{ order.address }}</td>
                  <td class="py-3 px-6">{{ order.items }}</td>
                  <td class="py-3 px-6">
                    <span class="{% if order.status == 'Pending' %}bg-yellow-200 text-yellow-800{% elif order.status == 'In Transit' %}bg-blue-200 text-blue-800{% elif order.status == 'Delivered' %}bg-green-200 text-green-800{% endif %} py-1 px-3 rounded-full text-xs">
                      {{ order.status }}
                    </span>
                  </td>
                  <td class="py-3 px-6">
                    <div class="flex space-x-2">
                      <a href="{{ url_for('update_order_status', order_id=order.id) }}" class="bg-blue-500 text-white px-2 py-1 rounded text-xs">Update</a>
                      <a href="{{ url_for('view_order_details', order_id=order.id) }}" class="bg-gray-500 text-white px-2 py-1 rounded text-xs">Details</a>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="6" class="py-4 px-6 text-center">No orders assigned yet.</td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </section>

      <!-- Delivery History -->
      <section class="bg-white p-6 rounded-lg shadow">
        <h3 class="text-xl font-bold text-gray-800 mb-4">Delivery History</h3>
        <div class="overflow-x-auto">
          <table class="min-w-full bg-white">
            <thead>
              <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                <th class="py-3 px-6 text-left">Order ID</th>
                <th class="py-3 px-6 text-left">Customer</th>
                <th class="py-3 px-6 text-left">Date</th>
                <th class="py-3 px-6 text-left">Status</th>
                <th class="py-3 px-6 text-left">Rating</th>
              </tr>
            </thead>
            <tbody class="text-gray-600 text-sm">
              {% if history %}
                {% for item in history %}
                <tr class="border-b border-gray-200 hover:bg-gray-50">
                  <td class="py-3 px-6">{{ item.id }}</td>
                  <td class="py-3 px-6">{{ item.customer_name }}</td>
                  <td class="py-3 px-6">{{ item.date }}</td>
                  <td class="py-3 px-6">
                    <span class="bg-green-200 text-green-800 py-1 px-3 rounded-full text-xs">
                      {{ item.status }}
                    </span>
                  </td>
                  <td class="py-3 px-6">
                    <div class="flex">
                      {% for i in range(item.rating) %}
                      <svg class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                      </svg>
                      {% endfor %}
                    </div>
                  </td>
                </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="5" class="py-4 px-6 text-center">No delivery history yet.</td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </div>
</body>
</html>